!function(){function GcmMessageSender_(iframe_){this.init(iframe_)}window.f1x2=window.f1x2||{};var p=GcmMessageSender_.prototype;p.init=function(iframe_){var this_=this;this_.iframe=iframe_,f1x2.gcmMuteOption=function(){},this_.iframe||window.addEventListener("message",function(e_){var msg;try{msg=JSON.parse(e_.data)}catch(e_){}msg&&msg.type&&this_.send(msg.type,msg.data)})},p.send=function(type_,data_){if(this.iframe)this.iframe.contentWindow.postMessage(JSON.stringify({type:type_,data:data_}),"*");else switch(type_){case"MUTE":f1x2.gcmMuteOption(data_)}},f1x2.GcmMessageSender=GcmMessageSender_}(),function(){function GcmFunctions_(pause_,resume_,balance_,autoplayStop_){this.init(pause_,resume_,balance_,autoplayStop_)}window.f1x2=window.f1x2||{},GcmFunctions_.prototype.init=function(pause_,resume_,balance_,autoplayStop_){var this_=this;if(this.pause=pause_,this.resume=resume_,this.balance=balance_,this.autoplayStop=autoplayStop_,f1x2.gcmConnected){var device=f1x2.getParameterByName("NYX_GCM_DEVICE");if(f1x2.canUseStorage())var sDevice=sessionStorage.getItem("NYX_GCM_DEVICE");sDevice&&"null"!==sDevice&&(device=sDevice),"mobile"===device?(f1x2.gcmManager.game.pause=pause_,f1x2.gcmManager.game.resume=resume_,f1x2.gcmManager.game.balanceUpdate=function(d_){balance_(d_.v||d_)},f1x2.gcmManager.game.stopAutoplay=autoplayStop_):window.addEventListener("message",function(e_){var f;e_.data.f?(f=this_[e_.data.f])&&f(e_.data.v):(f=this_[e_.data])&&f()})}},f1x2.GcmFunctions=GcmFunctions_}(),window.f1x2=window.f1x2||{},f1x2.canUseStorage=function(){var test="test-storage";try{return sessionStorage.setItem(test,test),sessionStorage.removeItem(test),!0}catch(e){return!1}},window.f1x2=window.f1x2||{},f1x2.GcmError=function(d_,e_){if(f1x2.gcmConnected){var d=String(d_),e=e_;if((d=decodeURIComponent(d)).match(/Error code:/i)){var v=d,search=["Error code: "," -"],s1=v.indexOf(search[0])+search[0].length,s2=v.indexOf(search[1]);e=Number(v.slice(s1,s2))}f1x2.GcmSendMessage(JSON.stringify({type:"ERROR",data:e}))}return f1x2.gcmConnected},window.f1x2=window.f1x2||{},f1x2.GcmSendMessage=function(d_){window.f1x2.gcmManager&&f1x2.gcmManager.handler?f1x2.gcmManager.handler.handle(d_):parent.postMessage(d_,"*")},window.f1x2=window.f1x2||{},f1x2.getParameterByName=function(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},function(){function handler_(e_){f1x2.gcmConnected||"1X2_GCM_CONNECT"!==e_.data||(f1x2.gcmConnected=!0,f1x2.GcmSendMessage(JSON.stringify({type:"CONNECT"})),window.removeEventListener("message",handler_))}window.f1x2=window.f1x2||{},f1x2.gcmConnected=!1,window.addEventListener("message",handler_);var client=f1x2.getParameterByName("clientName")||"",mode=f1x2.getParameterByName("playMode")||"",device=f1x2.getParameterByName("NYX_GCM_DEVICE");if(f1x2.canUseStorage())var sClient=sessionStorage.getItem("clientName"),sMode=sessionStorage.getItem("playMode"),sDevice=sessionStorage.getItem("NYX_GCM_DEVICE");if(sClient&&"null"!==sClient&&(client=sClient),sMode&&"null"!==sMode&&(mode=sMode),sDevice&&"null"!==sDevice&&(device=sDevice),client.match(/NYX/))if("mobile"===device){var src;src=null!==f1x2.getParameterByName("dev",decodeURIComponent(f1x2.getParameterByName("NYX_GCM_PARAMS")))?"https://1x2uk.com/NYX/gcm-dev.js?q="+Date.now():"https://1x2uk.com/NYX/gcm.min.js";var script=document.createElement("script");script.type="text/javascript",script.async=!0,script.src=src,script.onload=function(){f1x2.gcmManager=new f1x2.GcmManager(null,mode,device),handler_({data:"1X2_GCM_CONNECT"})},window.addEventListener("load",function(event){document.body.appendChild(script)})}else f1x2.gcmMessageSender=new f1x2.GcmMessageSender}();
//# sourceMappingURL=gcm.min.js.map